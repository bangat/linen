<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="ë¦°ë„¨ì‹¤" />
  <meta property="og:description" content="ì¼ì¼ ì‚¬ìš©ëŸ‰ì— ë§ê²Œ ìš”ì²­ ë°”ëë‹ˆë‹¤:D" />
  <meta property="og:image" content="https://i.ibb.co/TKrjqyL/001-3.png" />
  <meta property="og:url" content="https://hallymlinen.netlify.app/" />
  <meta property="og:type" content="website" />
  <title>ë¦°ë„¨ì‹¤ ìš”ì²­ì„œ</title>

  <!-- ì™¸ë¶€ CSS(ê¸°ì¡´) -->
<link rel="stylesheet" href="linen.css" />

  <!-- ì•„ì´ì½˜/íŒŒë¹„ì½˜ -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  <!-- ì•Œë¦¼ìŒ -->
  <audio
    id="notificationSound"
    src="https://drive.google.com/uc?export=download&id=1OwurEapLxRtn2I079OEjdkKxFncB35Ao"
  ></audio>

  <!-- ì¸ë¼ì¸ ë³´ì¡° ìŠ¤íƒ€ì¼ (í•„ìš” ìµœì†Œì¹˜) -->
  <style>
    /* ê´€ë¦¬ì ë²„íŠ¼(ì œìŠ¤ì²˜ìš©) */
    #adminAccessBtn {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
    }

    /* ë¹„í™œì„± íƒ­ */
    .tab.disabled {
      pointer-events: none;
      opacity: 0.5;
    }

    /* ì „ì†¡ ìƒíƒœ ë©”ì‹œì§€ */
    #statusMessage {
      position: fixed;
      top: 70%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      z-index: 999;
      display: none;
      white-space: normal;
      font-size: 14px;
    }

    /* ìƒë‹¨ í—¤ë” */
    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 10px 5px 10px;
    }
    .header-container h1 {
      margin: 0;
      font-size: 18px;
      flex: 1;
      text-align: left;
    }

    /* ===== ê³µì§€ ë§ˆí€´ ===== */
    .notice-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      margin: 8px 0 10px 0;
      border-radius: 8px;
      background: #fffbe6;
      border: 1px solid #ffe58f;
      overflow: hidden;
    }
    .notice-label {
      font-weight: bold;
      font-size: 13px;
      color: #ad6800;
      flex: 0 0 auto;
    }
    .notice-track {
      position: relative;
      white-space: nowrap;
      flex: 1 1 auto;
      will-change: transform;
      animation: marquee 18s linear infinite;
    }
    .notice-track:hover {
      animation-play-state: paused;
    }
    @keyframes marquee {
      0% {
        transform: translateX(100%);
      }
      100% {
        transform: translateX(-100%);
      }
    }
    .notice-actions {
      display: flex;
      gap: 6px;
      flex: 0 0 auto;
    }
    .notice-actions button {
      background: #ffd666;
      color: #5b3a00;
      border: none;
      border-radius: 6px;
      padding: 4px 8px;
      font-size: 12px;
      cursor: pointer;
    }

    /* ë‚ ì§œ ë¼ë²¨(ê²¹ì¹¨ ë°©ì§€: JSë¡œ show/hide) */
    .date-wrapper {
      position: relative;
      width: 100%;
    }
    .date-placeholder {
      position: absolute;
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
      color: #999;
      pointer-events: none;
      transition: all 0.2s ease;
    }
    .date-picker {
      width: 100%;
      padding: 10px;
      font-size: 15px;
      box-sizing: border-box;
    }

    /* ë©”ë‰´ë°” (í–„ë²„ê±°) */
    .menu-bar {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }
    .menu-bar div {
      width: 30px;
      height: 3px;
      margin: 3px 0;
      cursor: pointer;
      background-color: black;
    }

    /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */
    .dropdown-menu {
      display: none;
      position: absolute;
      top: 50px;
      right: 10px;
      background-color: white;
      border: 1px solid #ccc;
      z-index: 999;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      width: 150px;
    }
    .dropdown-menu a {
      display: block;
      padding: 10px;
      text-decoration: none;
      color: black;
      border-bottom: 1px solid #ccc;
    }
    .dropdown-menu a:last-child {
      border-bottom: none;
    }

    /* íƒ­ */
    .tabs {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 2px;
      margin-top: 10px;
      margin-bottom: 6px;
    }
    .tab {
      cursor: pointer;
      padding: 4px 8px;
      font-size: 11px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: #f0f0f0;
    }
    .tab.active {
      background-color: #4caf50;
      color: white;
    }

    /* ì„¹ì…˜/í…Œì´ë¸” */
    .form-section {
      display: none;
    }
    .form-section.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      display: block;         /* í—¤ë” ê³ ì • ëŒ€ë¹„ ìŠ¤í¬ë¡¤ */
      max-height: 60vh;       /* í™”ë©´ ë†’ì´ ëŠ˜ë¦¼ */
      overflow: auto;
    }
    th,
    td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
      position: sticky; /* ì²« í–‰ ê³ ì • */
      top: 0;
      z-index: 1;
    }
    td:first-child {
      width: 75%;
    }
    td:last-child {
      width: 25%;
    }

    /* ì…ë ¥ë“¤ */
    input[type='number'],
    input[type='text'] {
      width: 100%;
      box-sizing: border-box;
      padding: 5px;
    }

    /* ì¹´ë©”ë¼/ì „ì†¡ ì˜ì—­ */
    .camera-section {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
      gap: 8px;
    }
    #cameraButton,
    #submitBtn {
      background-color: #3498db;
      color: white;
      padding: 8px 16px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      display: inline-flex;
      align-items: center;
      font-size: 12px;
    }
    .camera-icon,
    .submit-icon {
      font-size: 12px;
      margin-right: 8px;
      vertical-align: middle;
    }
    #preview {
      max-width: 100%;
      margin-top: 10px;
      display: none;
    }

    /* ë³‘ë™/ë‚ ì§œ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
    .form-grid {
      display: grid;
      gap: 10px;
      margin-bottom: 10px;
    }
    .form-grid--two {
      grid-template-columns: 1fr 1fr;
    }

    
    /* ë“œë¡­ë‹¤ìš´ ë†’ì´(ëª¨ë°”ì¼) */
    select {
      height: auto;
      overflow-y: auto;
      width: 100%;
      padding: 10px;
      font-size: 15px;
      box-sizing: border-box;
    }
    @media only screen and (max-width: 768px) {
      select {
        font-size: 16px;
        max-height: 200px;
        overflow-y: scroll;
      }
    }
  </style>
</head>
<body>
  <!-- í—¤ë” -->
  <div class="content">
    <div class="header-container">
      <h1 id="noticeHeader">ìš”ì²­ì„œ</h1>
    </div>
  </div>

  <!-- í¼ -->
  <form id="linenRequestForm">
    <!-- ë³‘ë™ + ë‚ ì§œ í•œ ì¤„ (ë°˜ë°˜ ë‚˜ëˆ„ê¸°) -->
    <div class="form-grid form-grid--two">
      <div class="form-group">
        <select id="wardDropdown" name="ward" required>
          <option value="" disabled selected>ë³‘ë™ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</option>
          <option value="ë‚®ë³‘ë™">ë‚®ë³‘ë™</option>
          <option value="ì‹¬í˜ˆê´€">ì‹¬í˜ˆê´€</option>
          <option value="ë‚´ì‹œê²½ì‹¤">ë‚´ì‹œê²½ì‹¤</option>
          <option value="ì¤‘í™˜ìì‹¤">ì¤‘í™˜ìì‹¤</option>
          <option value="ì¸ê³µì‹ ì¥ì‹¤">ì¸ê³µì‹ ì¥ì‹¤</option>
          <option value="ìˆ˜ìˆ ì‹¤">ìˆ˜ìˆ ì‹¤</option>
          <option value="ë©´ì—­ì¹˜ë£Œì‹¤">ë©´ì—­ì¹˜ë£Œì‹¤</option>
          <option value="ì‘ê¸‰ì‹¤">ì‘ê¸‰ì‹¤</option>
          <option value="ë°©ì‚¬ì„ ì¢…ì–‘í•™ê³¼">ë°©ì‚¬ì„ ì¢…ì–‘í•™ê³¼</option>
        </select>
      </div>

      <div class="form-group date-wrapper">
        <label for="requestDate" class="date-placeholder">ì…ê³  ìš”ì²­ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</label>
        <input type="date" id="requestDate" class="date-picker" name="requestDate" required />
      </div>
    </div>

    <!-- ê³µì§€ ë§ˆí€´ -->
    <div class="notice-bar" id="noticeBar" aria-live="polite">
      <div class="notice-label">ê³µì§€</div>
      <div class="notice-track" id="noticeTrack">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
      <div class="notice-actions">
        <button type="button" id="noticeRefreshBtn">ìƒˆë¡œê³ ì¹¨</button>
      </div>
    </div>

  <!-- íƒ­/ì„¹ì…˜/ë²„íŠ¼ë“¤ì€ ê·¸ëŒ€ë¡œ ì´ì–´ì„œ -->


    <!-- íƒ­ -->
    <div class="tabs">
      <div class="tab active" data-tab="sheet">ì‹œíŠ¸/ê¸°íƒ€</div>
      <div class="tab" data-tab="normal">ì¼ë°˜ í™˜ì˜</div>
      <div class="tab" data-tab="ortho">ì •í˜• í™˜ì˜</div>
      <div class="tab" data-tab="uniform">ê·¼ ë¬´ ë³µ</div>
      <div class="tab" data-tab="inventory">ì¬ê³ /ìš”ì²­</div>
    </div>

    <!-- ì„¹ì…˜ë“¤ -->
    <div id="sheet" class="form-section active">
      <table>
        <tr>
          <th>í’ˆëª©</th>
          <th>ìš”ì²­ìˆ˜ëŸ‰</th>
        </tr>
      </table>
    </div>

    <div id="normal" class="form-section">
      <table>
        <tr>
          <th>í’ˆëª©</th>
          <th>ìš”ì²­ìˆ˜ëŸ‰</th>
        </tr>
      </table>
    </div>

    <div id="ortho" class="form-section">
      <table>
        <tr>
          <th>í’ˆëª©</th>
          <th>ìš”ì²­ìˆ˜ëŸ‰</th>
        </tr>
      </table>
    </div>

    <div id="uniform" class="form-section">
      <table>
        <tr>
          <th>í’ˆëª©</th>
          <th>ìš”ì²­ìˆ˜ëŸ‰</th>
        </tr>
      </table>
    </div>

    <div id="inventory" class="form-section">
      <div class="camera-section">
        <div class="button-container">
          <button type="button" id="cameraButton">
            <i class="fa fa-camera camera-icon"></i> ì¬ê³ ì‚¬ì§„
          </button>
          <input
            type="file"
            id="inventoryPhoto"
            style="display: none"
            accept="image/*"
          />
        </div>
        <button type="submit" id="submitBtn">
          <i class="fas fa-paper-plane submit-icon"></i> ìš”ì²­í•˜ê¸°
        </button>
        <img
          id="preview"
          src="#"
          alt="Preview"
          style="max-width: 100%; display: none"
        />
      </div>
    </div>

    <div id="statusMessage">ìš”ì²­ì„ ì „ì†¡ì¤‘ ì…ë‹ˆë‹¤..ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”..</div>
  </form>

  <div id="responseMessage"></div>

  <button id="adminAccessBtn">ê´€ë¦¬ì ì ‘ì†</button>

  <!-- ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- ê¸°ì¡´ js.js ìœ ì§€ ê°€ëŠ¥(ì œì¶œ/í…”ë ˆê·¸ë¨ ë“± ë¡œì§ì´ ìˆë‹¤ë©´). ë‹¨, ì¶©ëŒ ì—†ê²Œ ìµœì‹ í™” í•„ìš” -->
 <script src="js.js?v=20250820a"></script>

  <!-- ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸: íƒ­/ê³µì§€/ë¼ë²¨/ìƒì„± ë“± í•µì‹¬ ë™ì‘ -->
<script>
  $(document).ready(function () {
    /* ===== í‘œ ìë™ ìƒì„± ===== */
    const sheetItems = [
      { name: "ëŒ€ ì‹œ íŠ¸", key: "ëŒ€ì‹œíŠ¸_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ë°˜ ì‹œ íŠ¸", key: "ë°˜ì‹œíŠ¸_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ë²  ê°¯ ì‡", key: "ë² ê°¯ì‡_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ì¤‘ í™˜ ì˜", key: "ì¤‘í™˜ì˜_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ì´ ë¶ˆ", key: "ì´ë¶ˆ_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ì–¼ìŒì£¼ë¨¸ë‹ˆ", key: "ì–¼ìŒí¬_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ì–µ ì œ ëŒ€", key: "ì–µì œëŒ€_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ìˆ˜ ê±´", key: "ìˆ˜ê±´_ìš”ì²­ìˆ˜ëŸ‰" },
      { name: "ê²€ì§„ë³µ(í•˜ì˜)", key: "í•˜ì˜_ìš”ì²­ìˆ˜ëŸ‰" },
    ];
    const requiredSizes = ["3XL", "2XL", "XL", "L"];
    const sizes = ["4XL", "3XL", "2XL", "XL", "L", "M", "S"];
    const types = ["ìƒì˜", "í•˜ì˜"];

    function populateTable(sectionId, items) {
      const table = document.querySelector(`#${sectionId} table`);
      items.forEach((item) => {
        const row = document.createElement("tr");
        const itemCell = document.createElement("td");
        itemCell.textContent = item.name;
        const inputCell = document.createElement("td");
        const input = document.createElement("input");
        input.type = "number";
        input.name = item.key;
        input.min = 0;
        inputCell.appendChild(input);
        row.appendChild(itemCell);
        row.appendChild(inputCell);
        table.appendChild(row);
      });
    }
    function generateClothingItems(sizes, types) {
      return sizes.flatMap((size) =>
        types.map((type) => ({
          name: `${size} ${type}`,
          key: `${size}_${type}_ìš”ì²­ìˆ˜ëŸ‰`,
        }))
      );
    }
    populateTable("sheet", sheetItems);
    populateTable("normal", generateClothingItems(sizes, types));
    populateTable("ortho", generateClothingItems(sizes.slice(1), types));
    populateTable("uniform", generateClothingItems(requiredSizes, types));

    /* ===== í—¤ë” í´ë¦­: ì €ì¥ëœ ë³‘ë™ ë³µì› + ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ˆê¸°í™” ===== */
    $("#noticeHeader").off("click.reset").on("click.reset", function () {
      // ìˆ˜ëŸ‰ë§Œ ì´ˆê¸°í™”
      $('input[type="number"]').val('');

      // ë‚ ì§œ: ì˜¤ëŠ˜ë¡œ ì„¸íŒ… (ì „ì—­ í•¨ìˆ˜ ì˜ì¡´ X)
      const d = new Date();
      const today =
        d.getFullYear() + '-' +
        String(d.getMonth() + 1).padStart(2, '0') + '-' +
        String(d.getDate()).padStart(2, '0');
      $('#requestDate').val(today).trigger('change'); // ë¼ë²¨ ë™ê¸°í™”

      // ë³‘ë™: ì €ì¥ëœ ê°’ ë³µì›(ìˆì„ ë•Œë§Œ), ì—†ìœ¼ë©´ ë¹„ì›€
      const SAVED_WARD_KEY = 'linen_last_ward';
      const savedWard = localStorage.getItem(SAVED_WARD_KEY);
      if (savedWard && $('#wardDropdown option[value="' + savedWard + '"]').length) {
        $('#wardDropdown').val(savedWard);
      } else {
        $('#wardDropdown').val('');
      }

      // íƒ­ ì´ˆê¸°í™”(ì‹œíŠ¸/ê¸°íƒ€)
      $(".tab").removeClass("active").css("background-color", "");
      $(".form-section").removeClass("active");
      $('[data-tab="sheet"]').addClass("active").css("background-color", "#4CAF50");
      $("#sheet").addClass("active");
    });

    /* ===== íƒ­ ì „í™˜(ë¹„í™œì„± íƒ­ ë¬´ì‹œ) ===== */
    $("[data-tab='normal'], [data-tab='ortho'], [data-tab='uniform']").addClass("disabled");
    $(".tab").off("click.linen").on("click.linen", function () {
      if ($(this).hasClass("disabled")) return;
      const tabId = $(this).data("tab");
      $(".tab").removeClass("active").css("background-color", "");
      $(this).addClass("active").css("background-color", "#4CAF50");
      $(".form-section").removeClass("active");
      $("#" + tabId).addClass("active");
    });

    /* ===== ë‚ ì§œ ë¼ë²¨ ê²¹ì¹¨: ì…ë ¥ ìƒíƒœì— ë”°ë¼ show/hide ===== */
    const $dateInput = $("#requestDate");
    const $dateLabel = $(".date-placeholder");
    function syncDatePlaceholder() {
      $dateLabel.toggle(!$dateInput.val());
    }
    $dateLabel.on("click", () => $dateInput.trigger("focus"));
    $dateInput.on("input change blur", syncDatePlaceholder);
    syncDatePlaceholder();

    /* ===== ê³µì§€: js.jsì—ì„œ í´ë§í•˜ë¯€ë¡œ indexì—ì„  ì¤‘ë³µ í´ë§ ì œê±° ===== */
    // ğŸ‘‰ js.jsê°€ fetchNotice + setInterval ì²˜ë¦¬í•¨.
    //    index.htmlì—ì„œëŠ” ë”°ë¡œ í˜¸ì¶œ/íƒ€ì´ë¨¸ ë‘ì§€ ì•ŠìŒ.
  });
</script>

</body>
</html>
